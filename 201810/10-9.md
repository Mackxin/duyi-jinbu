# 10.9

> 如何从外部读取局部变量？

处于种种原因，我们有时候需要得到函数内的局部变量。但是，前面已经说过了，正常情况下，这是办不到的，只有通过变通方法才能实现。

那就是在函数的内部，再定义一个函数。

```javascript
function f1(){
    var n = 999;
    function f2(){
        alert(n); //999
    }
}
```

在上面的代码中，函数f2就被包括在函数f1内部，这是f1内部的所有局部变量，对f2都是可见。但是反过来就不行，f2内部的局部变量，对f1就是不可见的。这就是javascript语言特有的“链式作用域”结构（chain scope），子对象会一级一级地向上寻找所有父对象的变量。所以，父对象的所有变量，对子对象都是可见的，反之则不成立。

既然f2可以读取f1中的局部变量，那么只要把f2作为返回值，我们不就可以在f1外部读取它的内部变量了吗！

```javascript
function f1(){
    var n = 999;
    function f2(){
        alert(n);
    }
    return f2;
}
var result = f1();
result(); //999
```

